# 类的生命周期
类的生命周期：加载、验证、准备、解析、初始化、使用、卸载<p>
几个阶段是顺序开始，而不是按顺序进行或完成<p>
解析可以在初始化阶段之后开始（运行时绑定）<p>

## 加载
加载：
- 获取类的二进制数据
- 将二进制数据转换成方法区中的数据结构
- 堆中创建一个java.lang.Class对象，指向方法区中的数据结构

## 验证
验证：确保类的正确性，重要但不是必须的。<p>
-Xverifynone参数可以关闭大部分类验证措施<p>

## 准备
准备：为类的静态变量分配内存，并初始化为默认值(如0、0L、null、false等)<p>
方法区中分配内存，仅包括类变量(static)<p>
~~~java
// 例如
public static int v = 1;
// 准备阶段在方法区分配内存，v的值为0

public static final int v = 2;
// 准备阶段在方法区分配内存，v的值为2
~~~

## 解析
解析：把类中的符号引用转换为直接引用

## 初始化
初始化：为类的静态变量赋值,jvm负责初始化<p>
jvm初始化步骤
- 假如这个类还没有被加载和连接，则程序先加载并连接该类
- 假如该类的直接父类还没有被初始化，则先初始化其直接父类
- 假如类中有初始化语句，则系统依次执行这些初始化语句

类初始化时机:
- 创建类的实例，也就是new的方式
- 访问某个类或接口的静态变量，或者对该静态变量赋值
- 调用类的静态方法
- 反射(如Class.forName("com.pdai.jvm.Test"))
- 初始化某个类的子类，则其父类也会被初始化
- Java虚拟机启动时被标明为启动类的类(Java Test)，直接使用java.exe命令来运行某个主类

## 使用
使用：类访问方法区内的数据结构的接口，对象是Heap区的数据

## 卸载
卸载：Java虚拟机将结束生命周期
- 执行了System.exit()方法
- 程序正常执行结束
- 程序在执行过程中遇到了异常或错误而异常终止
- 由于操作系统出现错误而导致Java虚拟机进程终止

# 类加载器，jvm类加载机制










