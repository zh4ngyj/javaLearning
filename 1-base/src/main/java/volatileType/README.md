🧱 happens-before 八大规则（重点）

| happens-before 规则 | 描述                                  |
| ----------------- | ----------------------------------- |
| **程序顺序规则**        | 单线程内，代码按顺序执行                        |
| **锁规则**           | 一个 `unlock` 操作发生在后续对同一个锁的 `lock` 之前 |
| **volatile规则**    | 对一个 `volatile` 变量的写操作，先于之后的读操作      |
| **传递性**           | A → B，B → C ⇒ A → C                 |
| **线程启动规则**        | `Thread.start()` 之前的操作对该线程可见        |
| **线程终止规则**        | `Thread.join()` 返回前对主线程可见           |
| **线程中断规则**        | 对 `interrupt()` 的调用先于被中断线程检测到中断     |
| **对象构造规则**        | 构造函数中的 `final` 字段在构造完成后对其他线程可见      |


📍 常见屏障类型（x86 CPU，ARM，JVM 层次）

| 屏障名        | 含义                     |
| ---------- | ---------------------- |
| LoadLoad   | 屏障后面的读取不能在前面的读取之前      |
| StoreStore | 屏障后面的写入不能在前面的写入之前      |
| LoadStore  | 读取之后不能立即进行写入           |
| StoreLoad  | 写入之后不能立即读取（最强屏障，防止重排序） |
